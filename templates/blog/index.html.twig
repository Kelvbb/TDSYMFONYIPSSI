{% extends 'base.html.twig' %}

{% block title %}Articles{% endblock %}

{% block body %}
<div class="row mb-4">
    <div class="col-12">
        <h1 class="h5 fw-normal text-body">Articles</h1>
    </div>
</div>

<div class="row g-4">
    {% for post in posts %}
    <div class="col-12">
        <article class="card card-minimal">
            <div class="row g-0">
                <div class="col-md-4">
                    {% if post.picture %}
                    <img src="{{ post.picture|raw }}" class="img-fluid" alt="{{ post.title|e('html_attr') }}" referrerpolicy="no-referrer" style="height: 220px; object-fit: cover; width: 100%;">
                    {% else %}
                    <div class="bg-light d-flex align-items-center justify-content-center" style="height: 220px;">
                        <span class="text-secondary">—</span>
                    </div>
                    {% endif %}
                </div>
                <div class="col-md-8">
                    <div class="card-body">
                        <span class="badge badge-minimal">{{ post.category.name }}</span>
                        <h2 class="card-title h6 fw-normal mt-2">{{ post.title }}</h2>
                        <p class="card-text text-secondary small">{{ post.publishedAt|date('d/m/Y à H:i') }} — {{ post.author.displayName }}</p>
                        <p class="card-text small">{{ post.content|u.truncate(200) }}...</p>
                        <a href="{{ path('blog_show', { id: post.id }) }}" class="btn btn-minimal btn-sm">Lire</a>
                    </div>
                </div>
            </div>
        </article>
    </div>
    {% else %}
    <div class="col-12">
        <p class="text-secondary">Aucun article.</p>
    </div>
    {% endfor %}
</div>
{% endblock %}
